## example

<!-- tabs:start -->
#### ** C **
##### 1. 写一段包含C方法实现的java代码
```java
// Save as HelloJNI.java
public class HelloJNI{
    static {
        // Load native library hello.dll (Windows) or libhello.so (Unixes) at runtime
        // This library contains a native method called sayHello()
        System.loadLibrary("hello");
    }
    // Declare an instance native method sayHello() which receives no parameter and returns void
    private native void sayHello();
    public static void main(String[] args){
        // Create an instance and invoke the native method
        new HelloJNI().sayHello();
    }
}
```
> The static initializer invokes System.loadLibrary() to load the native library "hello" (which contains a native method called sayHello()) during the class loading. It will be mapped to "hello.dll" in Windows; or "libhello.so" in Unixes/Mac OS X. This library shall be included in Java's library path (kept in Java system variable java.library.path). You could include the library into Java's library path via VM argument -Djava.library.path=/path/to/lib. The program will throw a UnsatisfiedLinkError if the library cannot be found in runtime.


##### 2. 编译HelloJNI.java 并且生成C/C++头文件 HelloJNI.h
?> Starting from JDK 8, you should use "javac -h" to compile the Java program AND generate C/C++ header file called HelloJNI.h as follows:</br>
`javac -h . HelloJNI.java` </br>
The "-h dir" option generates C/C++ header and places it in the directory specified (in the above example, '.' for the current directory). </br>
</br>
Before JDK 8, you need to compile the Java program using javac and generate C/C++ header using a dedicated javah utility, as follows. The javah utility is no longer available in JDK 10. </br>
`javac HelloJNI.java` </br>
`javah HelloJNI`

```c
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class HelloJNI */

#ifndef _Included_HelloJNI
#define _Included_HelloJNI
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     HelloJNI
 * Method:    sayHello
 * Signature: ()V
 */
JNIEXPORT void JNICALL Java_HelloJNI_sayHello
  (JNIEnv *, jobject);

#ifdef __cplusplus
}
#endif
#endif
```

##### 3. 实现C语言代码
```c
// Save as "HelloJNI.c"
#include <jni.h>        // JNI header provided by JDK
#include <stdio.h>      // C Standard IO Header
#include "HelloJNI.h"   // Generated
 
// Implementation of the native method sayHello()
JNIEXPORT void JNICALL Java_HelloJNI_sayHello(JNIEnv *env, jobject thisObj) {
   printf("Hello World!\n");
   return;
}
```

##### 4. 编译HelloJNI.c
<!-- tabs:start -->
###### ** (Mac OS X) 64-Bit JDK **
1. Set environment variable JAVA_HOME to point to the JDK installed directory (which shall contains the include subdirectory to be used in the next step):
```shell
$ export JAVA_HOME=/your/java/installed/dir
   // for my machine @ /Library/Java/JavaVirtualMachines/jdk1.8.0_xx.jdk/Contents/Home
$ echo $JAVA_HOME
```
2. Compile the C program HelloJNI.c into dynamic share module libhello.dylib using gcc, which is included in all Unixes/Mac OS:
```shell
$ gcc -I"$JAVA_HOME/include" -I"$JAVA_HOME/include/darwin" -dynamiclib -o libhello.dylib HelloJNI.c
```
3. Run the Java Program:
```shell
$ java -Djava.library.path=. HelloJNI
```
###### ** (Ubuntu) 64-bit JDK **
1. Set environment variable JAVA_HOME to point to the JDK installed directory (which shall contains the include subdirectory to be used in the next step):
```shell
$ export JAVA_HOME=/your/java/installed/dir
$ echo $JAVA_HOME
```
2. Compile the C program HelloJNI.c into share module libhello.so using gcc, which is included in all Unixes:
```shell
$ gcc -fPIC -I"$JAVA_HOME/include" -I"$JAVA_HOME/include/linux" -shared -o libhello.so HelloJNI.c
```
3. Run the Java Program:
```shell
$ java -Djava.library.path=. HelloJNI
```
<!-- tabs:end -->

##### 5. 效果
![](/.images/doc/advance/jni/jni-show-01.png)


#### ** C++ **
```c++
```
<!-- tabs:end -->



## Reference
* https://www3.ntu.edu.sg/home/ehchua/programming/java/javanativeinterface.html